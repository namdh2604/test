
using System;
using System.Collections.Generic;

namespace Voltage.Witches.IAP
{
	using Voltage.Common.IAP;
	using UnityEngine;

	public class PaymentPassThruProcessor : ITransactionProcessor
	{
		private string OS_TYPE;
		public void Initialize(Action<string> onInit)
		{
			// No Initialization required, return call back
			if (onInit != null)
			{
				onInit(string.Empty);
			}
		}


		public void Purchase(string productID, Action<TransactionReceipt> onSuccess, Action<TransactionFailedReceipt> onFailure)
		{
			string receipt = string.Empty;
#if UNITY_IOS
            string _placeholderiOSReceipt = "ewoJInNpZ25hdHVyZSIgPSAiQW5TR0t0WDZiQUhVOGdBcEI3L2NsMWoyQ3NVM2t2VUUyTWl1MVIzaUVtMXE5MUZzeDJxTUdPaS9ka3M1UVZDVWZvdHBsaXFlRWl2ejZVWUREc3VKR3RjTmdsQWluZk9JTHNNZ2kwNGZWQmU3V1hLS3VBSWVGck1FQ1dYWGRYemVUWkR3ZmZVamo4OERYSGxPT0V4YTV5OE5yT1NBUUZmVUtCdERqYVlNWmd2Q0FBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NCdXA0K1BBaG0vTE1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEUwTURZd056QXdNREl5TVZvWERURTJNRFV4T0RFNE16RXpNRm93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmhoYzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRXNWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEFNSUdKQW9HQkFNbVRFdUxnamltTHdSSnh5MW9FZjBlc1VORFZFSWU2d0Rzbm5hbDE0aE5CdDF2MTk1WDZuOTNZTzdnaTNvclBTdXg5RDU1NFNrTXArU2F5Zzg0bFRjMzYyVXRtWUxwV25iMzRucXlHeDlLQlZUeTVPR1Y0bGpFMU93QytvVG5STStRTFJDbWVOeE1iUFpoUzQ3VCtlWnRERWhWQjl1c2szK0pNMkNvZ2Z3bzdBZ01CQUFHamNqQndNQjBHQTFVZERnUVdCQlNKYUVlTnVxOURmNlpmTjY4RmUrSTJ1MjJzc0RBTUJnTlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRkRZZDZPS2RndElCR0xVeWF3N1hRd3VSV0VNNk1BNEdBMVVkRHdFQi93UUVBd0lIZ0RBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQWVhSlYyVTUxcnhmY3FBQWU1QzIvZkVXOEtVbDRpTzRsTXV0YTdONlh6UDFwWkl6MU5ra0N0SUl3ZXlOajVVUllISytIalJLU1U5UkxndU5sMG5rZnhxT2JpTWNrd1J1ZEtTcTY5Tkluclp5Q0Q2NlI0Szc3bmI5bE1UQUJTU1lsc0t0OG9OdGxoZ1IvMWtqU1NSUWNIa3RzRGNTaVFHS01ka1NscDRBeVhmN3ZuSFBCZTR5Q3dZVjJQcFNOMDRrYm9pSjNwQmx4c0d3Vi9abEwyNk0ydWVZSEtZQ3VYaGRxRnd4VmdtNTJoM29lSk9PdC92WTRFY1FxN2VxSG02bTAzWjliN1BSellNMktHWEhEbU9Nazd2RHBlTVZsTERQU0dZejErVTNzRHhKemViU3BiYUptVDdpbXpVS2ZnZ0VZN3h4ZjRjemZIMHlqNXdOelNHVE92UT09IjsKCSJwdXJjaGFzZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlBOUlDSXlNREUwTFRBM0xUSXlJREUyT2pFMU9qTXlJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNaWE1pT3dvSkluVnVhWEYxWlMxcFpHVnVkR2xtYVdWeUlpQTlJQ0l3TkRka1pETTJNalJrWWpobVlUVTVNREUyWkRnNE56VTRPV0UzTURJd1lqUXdObUV6Wm1RNUlqc0tDU0p2Y21sbmFXNWhiQzEwY21GdWMyRmpkR2x2YmkxcFpDSWdQU0FpTVRBd01EQXdNREV4TnpZMk5qa3lNU0k3Q2draVluWnljeUlnUFNBaU1TNHdJanNLQ1NKMGNtRnVjMkZqZEdsdmJpMXBaQ0lnUFNBaU1UQXdNREF3TURFeU5ETTRPVFV6TVNJN0Nna2ljWFZoYm5ScGRIa2lJRDBnSWpFaU93b0pJbTl5YVdkcGJtRnNMWEIxY21Ob1lYTmxMV1JoZEdVdGJYTWlJRDBnSWpFME1EWXdOekE1TXpJd01EQWlPd29KSW5WdWFYRjFaUzEyWlc1a2IzSXRhV1JsYm5ScFptbGxjaUlnUFNBaU1VTTJPRFEyUkVVdE9VUkdOUzAwTURRMUxVRkVRekV0TmpsR1JVUTNOVVkxUVRReElqc0tDU0p3Y205a2RXTjBMV2xrSWlBOUlDSnpjSGw2WDJWdGJXVjBkRjlsTURFd01TSTdDZ2tpYVhSbGJTMXBaQ0lnUFNBaU9EWTNPREU1TXpBNUlqc0tDU0ppYVdRaUlEMGdJbU52YlM1MmIyeDBZV2RsTG1WdWRDNXpjSGw2TG1WdUlqc0tDU0p3ZFhKamFHRnpaUzFrWVhSbExXMXpJaUE5SUNJeE5ERXhNRGMwTnpjeU1EQXdJanNLQ1NKd2RYSmphR0Z6WlMxa1lYUmxJaUE5SUNJeU1ERTBMVEE1TFRFNElESXhPakV5T2pVeUlFVjBZeTlIVFZRaU93b0pJbkIxY21Ob1lYTmxMV1JoZEdVdGNITjBJaUE5SUNJeU1ERTBMVEE1TFRFNElERTBPakV5T2pVeUlFRnRaWEpwWTJFdlRHOXpYMEZ1WjJWc1pYTWlPd29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVWlJRDBnSWpJd01UUXRNRGN0TWpJZ01qTTZNVFU2TXpJZ1JYUmpMMGROVkNJN0NuMD0iOwoJImVudmlyb25tZW50IiA9ICJTYW5kYm94IjsKCSJwb2QiID0gIjEwMCI7Cgkic2lnbmluZy1zdGF0dXMiID0gIjAiOwp9";
//			string missing_in_app_field = "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";
			receipt = _placeholderiOSReceipt;
#else
			string placeholderAndroidReceipt = "";
			if (Application.platform == RuntimePlatform.Android)
			{
				OS_TYPE =  AndroidOSDetector.DetectAndroidOSType();

				if (OS_TYPE == AndroidOSDetector.AMAZON)
				{
					string amazon_user_id = "99FD_DL23EMhrOGDnur9-ulvqomrSg6qyLPSD3CFE=";
					string amazon_receipt_id = "q1YqVrJSSs7P1UvMTazKz9PLTCwoTswtyEktM9JLrShIzCvOzM-LL04tiTdW0lFKASo2NDEwMjCwMDM2MTC0AIqVAsUsLd1c4l18jIxdfTOK_N1d8kqLLHVLc8oK83OLgtPNCit9AoJdjJ3dXG2BGkqUrAxrAQ";
					placeholderAndroidReceipt = "{\"amazon_user_id\":" + "\"" + amazon_user_id + "\"" + ", \"receipt_id\":" + "\"" + amazon_receipt_id + "\"" + "}";
				}
				else
				{
					placeholderAndroidReceipt = "{\"json\":\"{\"orderId\":\"GPA.1334-9182-9849-70173\",\"packageName\":\"com.voltage.curse.en\",\"productId\":\"com.voltage.ent.witch.001\",\"purchaseTime\":1439849268260,\"purchaseState\":0,\"purchaseToken\":\"mhfjmhgbijhgakhhklnemfio.AO-J1OzxBToUOmeOicqA4aTvKlyQYkIltMqml9jUZeT7Tcvx6QXQwnUMEWAh3jzzaa9NnF0eMG34F7xK7FBG72FSzA5yEzogbJOjDVFWXmXBB6Q3KxeP7dEWwA8iAf5PPp-puKWPRBSE\"}\",\"developerPayload\":\"\",\"signature\":\"CXo+sVHwd+PWglfiE6KG23IlmwgJGeFU9K9KzukKVrCPc74QlXCcGCTrEeJiW2cxhPvJo\\/Ah\\/JxBVTXCcxj6F08yJ85XNOzRTjVNlIQUXZ+HYyBm5xN2KIdRjNHp3IogrMSFdQ4cT6HbGXmqRZx4VKEWuvhsOLMUmC0j1CMmIAqZi2meBiRShLE5pDdjc2pl5eLAsB8+vTaD1GDgv7E9x4GVYQehchfmOa1sLLsF8auAEI\\/QyTH28ojj5jgy9yGIvMZ8SCJtDnIcsa6dKWfbL3QZu6y622BFPnDOyVpjtRSytFvcznlwQrqGh8yuXYV3nIq\\/62ohkGW19L0C64QFZw==\"}";
				}
			}
			else
			{
				placeholderAndroidReceipt = "{\"json\":\"{\"orderId\":\"GPA.1334-9182-9849-70173\",\"packageName\":\"com.voltage.curse.en\",\"productId\":\"com.voltage.ent.witch.001\",\"purchaseTime\":1439849268260,\"purchaseState\":0,\"purchaseToken\":\"mhfjmhgbijhgakhhklnemfio.AO-J1OzxBToUOmeOicqA4aTvKlyQYkIltMqml9jUZeT7Tcvx6QXQwnUMEWAh3jzzaa9NnF0eMG34F7xK7FBG72FSzA5yEzogbJOjDVFWXmXBB6Q3KxeP7dEWwA8iAf5PPp-puKWPRBSE\"}\",\"developerPayload\":\"\",\"signature\":\"CXo+sVHwd+PWglfiE6KG23IlmwgJGeFU9K9KzukKVrCPc74QlXCcGCTrEeJiW2cxhPvJo\\/Ah\\/JxBVTXCcxj6F08yJ85XNOzRTjVNlIQUXZ+HYyBm5xN2KIdRjNHp3IogrMSFdQ4cT6HbGXmqRZx4VKEWuvhsOLMUmC0j1CMmIAqZi2meBiRShLE5pDdjc2pl5eLAsB8+vTaD1GDgv7E9x4GVYQehchfmOa1sLLsF8auAEI\\/QyTH28ojj5jgy9yGIvMZ8SCJtDnIcsa6dKWfbL3QZu6y622BFPnDOyVpjtRSytFvcznlwQrqGh8yuXYV3nIq\\/62ohkGW19L0C64QFZw==\"}";
			}
			receipt = placeholderAndroidReceipt;
#endif

// Removed the platform because when ran in editor even as an iOS build it doesn't see it as iOS.
//			if (Application.platform == RuntimePlatform.IPhonePlayer) 
//			{
//				receipt = _placeholderiOSReceipt;
//			}
//			else
//			{
//				receipt = _placeholderAndroidReceipt;
//			}
			

			TransactionReceipt transactionReceipt = new TransactionReceipt (productID, "0", receipt);
			onSuccess (transactionReceipt);					
//			onFailure (new TransactionFailedReceipt (productID, "test purchase failed! " + receipt));
		}
	}




	public class ConditionalPaymentProcessor : ITransactionProcessor
    {
//		private IDictionary<string,bool> _purchaseConditions;
//		public IDictionary<string,bool> PurchaseConditions 
//		{ 
//			get { return _purchaseConditions; }
//			set { _purchaseConditions = (value != null ? value : new Dictionary<string,bool> ()); }
//		}
		public void Initialize(Action<string> onInit)
		{
			// No Initialization required, return call back
			if (onInit != null)
			{
				onInit(string.Empty);
			}
		}

		public ConditionalPaymentProcessor(IDictionary<string,bool> purchaseConditions=null)	// TODO:
		{
			throw new NotImplementedException("ConditionalPaymentProcessor NYI");

//			PurchaseConditions = (purchaseConditions != null ? new Dictionary<string,bool>(purchaseConditions) : new Dictionary<string,bool>());
		}

		public void Purchase(string productID, Action<TransactionReceipt> onSuccess, Action<TransactionFailedReceipt> onFailure)
		{

			// TODO: add conditional...u



		}

    }
    
}




